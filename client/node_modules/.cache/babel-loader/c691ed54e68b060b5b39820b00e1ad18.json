{"ast":null,"code":"import _classCallCheck from \"C:\\\\Users\\\\Hruda Mohod\\\\Desktop\\\\MERN - Copy\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\Hruda Mohod\\\\Desktop\\\\MERN - Copy\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\Hruda Mohod\\\\Desktop\\\\MERN - Copy\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\Hruda Mohod\\\\Desktop\\\\MERN - Copy\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\Hruda Mohod\\\\Desktop\\\\MERN - Copy\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"C:\\\\Users\\\\Hruda Mohod\\\\Desktop\\\\MERN - Copy\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"C:\\\\Users\\\\Hruda Mohod\\\\Desktop\\\\MERN - Copy\\\\client\\\\src\\\\components\\\\Mainpage.js\";\nimport React, { Component } from \"react\";\nimport axios from \"axios\";\nimport { Nav } from \"./Nav\";\nimport { Footer } from \"./Footer\";\nimport \"../components/css/Mainpage.css\";\nexport var Mainpage =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Mainpage, _Component);\n\n  function Mainpage(props) {\n    var _this;\n\n    _classCallCheck(this, Mainpage);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Mainpage).call(this, props));\n    _this.state = {\n      selectedFile: [],\n      success: '',\n      filename: '',\n      makePublic: '',\n      filepath: '',\n      valerrors: ''\n    };\n\n    if (localStorage.getItem('firstname') == null) {\n      _this.isloggedin = false;\n    } else {\n      _this.isloggedin = true;\n    }\n\n    _this.filesuccess = null; //name of file uploaded!!\n\n    _this.fileid = null;\n    _this.filename = null;\n    _this.url = null;\n    _this.openS = null;\n    _this.handleselectedFile = _this.handleselectedFile.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleUpload = _this.handleUpload.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.trackid = _this.trackid.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.makePublic = _this.makePublic.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(Mainpage, [{\n    key: \"handleUpload\",\n    value: function handleUpload() {\n      var _this2 = this;\n\n      if (this.state.selectedFile.length === 0) {\n        this.setState({\n          valerrors: 'You forgot to upload a file',\n          success: false\n        });\n        return;\n      }\n\n      if (this.state.filename === '') {\n        this.setState({\n          valerrors: 'Track name cannot be empty',\n          success: false\n        });\n        return;\n      } else {\n        // creating the form data with the name that can be identified at the server\n        var fd = new FormData(); //create standard javascript form object\n        //file filename,file \n\n        fd.append('musicUpload', this.state.selectedFile, this.state.filename);\n      }\n\n      axios.post(\"http://localhost:8080/music/upload\", fd).then(function (result) {\n        if (result.data.errors) {\n          return _this2.setState({\n            valerrors: result.data.errors,\n            success: false\n          });\n        } else {\n          // on successfull upload a second call to store music against the user\n          var param = encodeURIComponent(_this2.state.filepath); //sending in the encoded url\n\n          if (_this2.state.makePublic !== true) {\n            _this2.setState({\n              makePublic: false\n            });\n          }\n\n          var urlRoute = \"http://localhost:8080/music/insert/\" + //basic route\n          _this2.state.filename + \"/\" + //filename\n          localStorage.getItem('firstname') + //email id\n          \"/\" + param + \"/\" + //encoded filepath\n          _this2.state.makePublic; //public identifier\n\n\n          axios.post(urlRoute).then(function (res) {\n            if (res.data.errors) return _this2.setState({\n              valerrors: result.data.errors,\n              success: false\n            });else {\n              _this2.filesuccess = _this2.state.filename; //store in var for display as success of file\n\n              return _this2.setState({\n                success: true,\n                makePublic: false\n              });\n            }\n          });\n        }\n      });\n    }\n  }, {\n    key: \"handleselectedFile\",\n    value: function handleselectedFile(e) {\n      // capture url to local directory & file\n      this.filesuccess = '';\n      this.setState({\n        selectedFile: e.target.files[0],\n        filepath: e.target.value,\n        success: false,\n        valerrors: '' //remove error dynamically if file is uploaded\n\n      });\n    }\n  }, {\n    key: \"trackid\",\n    value: function trackid(e) {\n      this.filesuccess = '';\n      this.setState({\n        filename: e.target.value,\n        success: false,\n        valerrors: '' //remove error dynamically if trackid is changed\n\n      });\n    }\n  }, {\n    key: \"makePublic\",\n    value: function makePublic(e) {\n      this.setState({\n        makepublic: e.target.checked\n      });\n    } // *****************************************************************  \n    //fetch music uploaded by a person and for loop through the filenames\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      return this.isloggedin ? React.createElement(\"div\", {\n        className: \"body5\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125\n        },\n        __self: this\n      }, React.createElement(Nav, {\n        login: this.isloggedin,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        id: \"mainpageshow\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"bg1\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128\n        },\n        __self: this\n      }), React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130\n        },\n        __self: this\n      }, \"FACE THE MUSIC!!\"), React.createElement(\"div\", {\n        className: \"input2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        onChange: this.handleselectedFile,\n        type: \"file\",\n        id: \"post\",\n        className: \"form-group1\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        onChange: this.trackid,\n        type: \"text\",\n        className: \"form-group1\",\n        placeholder: \"File name\",\n        required: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134\n        },\n        __self: this\n      }), React.createElement(\"button\", {\n        onClick: this.handleUpload,\n        className: \"mainpagebutton\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135\n        },\n        __self: this\n      }, \"Upload\"), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136\n        },\n        __self: this\n      }), React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137\n        },\n        __self: this\n      }, \"Make public?\"), \"\\xA0\\xA0\\xA0\", React.createElement(\"input\", {\n        type: \"checkbox\",\n        onClick: this.makePublic,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      }, this.state.success ? React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        },\n        __self: this\n      }, this.filesuccess, \" Uploaded Successfully\") : React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        },\n        __self: this\n      }, this.state.valerrors)), React.createElement(\"a\", {\n        href: \"/Playlist\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142\n        },\n        __self: this\n      }, \" \", React.createElement(\"button\", {\n        type: \"button\",\n        className: \"btn btn-primary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142\n        },\n        __self: this\n      }, \"View the Playlist\"))))) : React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149\n        },\n        __self: this\n      }, React.createElement(Nav, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150\n        },\n        __self: this\n      }), React.createElement(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151\n        },\n        __self: this\n      }, \"Please login\"), React.createElement(Footer, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return Mainpage;\n}(Component);\nexport default Mainpage;","map":{"version":3,"sources":["C:\\Users\\Hruda Mohod\\Desktop\\MERN - Copy\\client\\src\\components\\Mainpage.js"],"names":["React","Component","axios","Nav","Footer","Mainpage","props","state","selectedFile","success","filename","makePublic","filepath","valerrors","localStorage","getItem","isloggedin","filesuccess","fileid","url","openS","handleselectedFile","bind","handleUpload","trackid","length","setState","fd","FormData","append","post","then","result","data","errors","param","encodeURIComponent","urlRoute","res","e","target","files","value","makepublic","checked"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport axios from \"axios\";\r\nimport { Nav } from \"./Nav\";\r\nimport {Footer} from \"./Footer\";\r\n\r\nimport \"../components/css/Mainpage.css\";\r\nexport class Mainpage extends Component {\r\nconstructor(props){\r\n      super(props);\r\n      this.state = {\r\n        selectedFile: [],\r\n        success: '',\r\n        filename: '',\r\n        makePublic: '',\r\n        filepath: '',\r\n        valerrors: ''\r\n      };\r\n      if(localStorage.getItem('firstname') == null){\r\n        this.isloggedin = false;\r\n      }else{\r\n        this.isloggedin = true;\r\n      }\r\n      this.filesuccess = null;  //name of file uploaded!!\r\n      this.fileid = null;\r\n      this.filename = null;\r\n      this.url = null;\r\n      this.openS = null;\r\n      this.handleselectedFile = this.handleselectedFile.bind(this);\r\n      this.handleUpload = this.handleUpload.bind(this);\r\n      this.trackid = this.trackid.bind(this);\r\n      this.makePublic = this.makePublic.bind(this);\r\n\r\n}\r\nhandleUpload() {    \r\n  if(this.state.selectedFile.length === 0){\r\n    this.setState({\r\n      valerrors : 'You forgot to upload a file',\r\n      success: false \r\n    });\r\n    return;\r\n  }\r\n  if(this.state.filename === ''){\r\n    this.setState({\r\n      valerrors : 'Track name cannot be empty',\r\n      success: false \r\n    });\r\n    return;\r\n  }else{\r\n   // creating the form data with the name that can be identified at the server\r\n  var fd = new FormData();  //create standard javascript form object\r\n  //file filename,file \r\n  fd.append('musicUpload',this.state.selectedFile,this.state.filename);\r\n  }\r\n  axios\r\n    .post(\"http://localhost:8080/music/upload\", fd)\r\n    .then(result => {\r\n      if (result.data.errors) {\r\n        return this.setState({\r\n          valerrors: result.data.errors,\r\n          success: false\r\n        });\r\n      }\r\n      else{\r\n        // on successfull upload a second call to store music against the user\r\n        let param = encodeURIComponent(this.state.filepath); //sending in the encoded url\r\n        if(this.state.makePublic !== true){\r\n          this.setState({makePublic: false});\r\n        }\r\n        let urlRoute = \"http://localhost:8080/music/insert/\"+     //basic route\r\n                        this.state.filename+\"/\"+                  //filename\r\n                        localStorage.getItem('firstname')+        //email id\r\n                        \"/\"+param+\"/\"+                            //encoded filepath\r\n                        this.state.makePublic;                    //public identifier\r\n        axios\r\n            .post(urlRoute)\r\n            .then(res=>{\r\n              if(res.data.errors) \r\n              return this.setState({\r\n                valerrors: result.data.errors,\r\n                success: false\r\n              });\r\n              else{\r\n                this.filesuccess = this.state.filename; //store in var for display as success of file\r\n                return this.setState({\r\n                  success: true,\r\n                  makePublic: false\r\n                });\r\n              }\r\n            });\r\n      }\r\n    });\r\n}\r\n    handleselectedFile(e) {\r\n      // capture url to local directory & file\r\n      this.filesuccess = '';\r\n      this.setState({\r\n        selectedFile: e.target.files[0],\r\n        filepath: e.target.value,\r\n        success: false,\r\n        valerrors: ''       //remove error dynamically if file is uploaded\r\n      });\r\n    }\r\n  \r\n    trackid(e){\r\n      this.filesuccess = '';\r\n      this.setState({\r\n        filename: e.target.value,  \r\n        success: false,\r\n        valerrors: ''       //remove error dynamically if trackid is changed\r\n      });\r\n    }\r\n  \r\n    makePublic(e){\r\n      this.setState({\r\n        makepublic: e.target.checked\r\n      });\r\n    }  \r\n      \r\n    // *****************************************************************  \r\n\r\n  \r\n  //fetch music uploaded by a person and for loop through the filenames\r\n  render() {\r\n    return this.isloggedin ? (\r\n      <div className=\"body5\">\r\n        <Nav login={this.isloggedin}/>\r\n        <div id=\"mainpageshow\" >\r\n        <div className=\"bg1\" />\r\n        \r\n          <h1>FACE THE MUSIC!!</h1>\r\n          <div className=\"input2\">\r\n          <input onChange = {this.handleselectedFile} type=\"file\" id=\"post\" className=\"form-group1\"/>\r\n          <br/><br/>\r\n          <input onChange = {this.trackid} type=\"text\" className=\"form-group1\" placeholder=\"File name\" required/>\r\n          <button onClick={this.handleUpload} className=\"mainpagebutton\">Upload</button>\r\n          <br/>\r\n          <label>Make public?</label>&nbsp;&nbsp;&nbsp;\r\n          <input type=\"checkbox\" onClick={this.makePublic}/>\r\n          <div>{ this.state.success ?\r\n          (<span>{this.filesuccess} Uploaded Successfully</span>) : (<span>{this.state.valerrors}</span>)}\r\n          </div>\r\n          <a href=\"/Playlist\"> <button type=\"button\" className=\"btn btn-primary\">View the Playlist</button></a>\r\n        </div>\r\n        </div>\r\n        {/* <Footer /> */}\r\n        \r\n    </div>\r\n    ) : (\r\n      <div>\r\n      <Nav/>\r\n      <h3>Please login</h3>\r\n      <Footer/>\r\n      </div>\r\n    );\r\n  }\r\n}\r\nexport default Mainpage;"]},"metadata":{},"sourceType":"module"}